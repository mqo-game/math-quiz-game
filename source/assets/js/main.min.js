function howl(e,t){return new Howl({src:[`assets/audio/${e}`],volume:t})}$(function(){uhs(),pages(1);sessionStorage;$("ver").html(ver),$(document).keypress(function(e){let t=$("#a"),a=e.key;t.is(":visible")&&(isNaN(a)||" "==a?"Delete"==a?t.val(""):"Space"==a&&$("#check").click():tn(a))}),$.get(`https://mcjoe21.com/collect?event=Page%20View&value=${location.href}&referer=${location.referer}`),$.get("changes.txt",e=>{let t=e.replace(/(fixed|added|worked|nerfed)/gi,"<u>$1</u>").replace(/- /g,"").split("\n");$.each(t,function(){$("#updates").append(`<li>${this}</li>`)})}),$.get("get/news.json",e=>{ls("news",e.items.length),$.each(e.items,function(e,t){$("#newsIndex").append(`<li id = news${e}>${t.title}</li>`),ap(12),$("#news"+e).click(function(){$(gb[13]).html(`<h4>${t.title}</h4><ul><li>${t.content_html.replace("\n","</li><li>")}</li></ul>`),ap(13)})})}),$.get("get/planned.json",e=>{let t="";$.each(e.data,function(e,a){t+=`<li id = ${e}><a href = https://github.com/mqo-game/math-quiz-game/issues/new?title=[Suggestion]:+${a.text.replace(" ","+")}&label=${a.label}&template=feature_request.yml target=_blank>${a.text}</a></li>`}),$("#planned").html(t)}),$("button").each(function(){$(this).click(function(e){e.preventDefault(),beep.play()})}),function(e,t,a,s,n){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var l=t.getElementsByTagName(a)[0],i=t.createElement(a);i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id=GTM-597B7WH",l.parentNode.insertBefore(i,l)}(window,document,"script","dataLayer")});var beep=howl("beep.ogg",.05),cheer=[howl("cheer_0.ogg",.07),howl("cheer_1.ogg",.07)];function n(e){return Number(e)}function fv(e){return $("#menu_form").children(`#${e}`).val()}function s(e){ls("mqo-user",JSON.stringify(e))}function confettis(){$("#confettis").show(),setTimeout(()=>{$("#confettis").hide()},ran(800,1e3)),cheer[ran(0,1)].play()}let u={dataver:2,name:`Player_${ran(100,899)}`,uid:uid(20),pts:[0,0,0],plays:0,lives:0,ver:"0.5",tasks:{count:0,first_game:[0,1,0,1],plays:[0,10,10],earn_total:[0,200,100],earn_game:[0,25,50],save_lives:[0,30,0]}},ver="0.5",form=$("form");function eg(e,t){u.plays++,u.pts[0]+=n(e),u.pts[1]=n(e),u.lives+=lives,1==u.usage&&(dataLayer.push({event:"End Game",value:`${e}x${t}x${u.plays}`}),$.get(`https://mcjoe21.com/collect?event=End%20Game&value=${e}x${t}x${u.plays}&referer=${ls("game")}`)),pages(4),$("#a").val("");let a=$("#endText"),l=$("#endTitle");function i(){return 0==t?5*lives:0}a.html(`<p>Hey <span class = "grey-bg" >${u.name}</span>,</p><p>It looks like you ${function(){let e=[["You Win!","completed your challenge at"],["You Quit!","quit but you did last until"],["You Lose!","losed but you did last until"]];return l.text(e[t][0]),e[t][1]}()} question <span class = 'grey-bg'>${q}</span> and got <span class='grey-bg'>${e}</span> points and got <span class = 'grey-bg'>${i()}</span> bonus points for lives!</p><p>And you have played <span class = 'grey-bg'>${u.plays}</span> time(s)!<br/>${u.pts[2]<e?(u.pts[2]=i()+n(e),s(u),`New highscore of <span class = 'grey-bg'>${u.pts[2]}</span> points!`):`Highscore is <span class='grey-bg'>${u.pts[2]}</span>points!`}</p>Your target score is <span class='grey-bg'>${fv("target")}</span> on <span class = 'grey-bg'>${["Extra Easy","Easy","Normal","Hard","Extra Hard"][n(fv("diff"))-1]}</span> difficulty!</p>`),u.pts[0]+=i(),uhs(),s(u)}function uhs(){$("#task_count").text(`${u.tasks.count} Points`),$("#name").val(u.name),$("#stats").html(`<span class = grey-bg>${u.plays}</span> games played with <span class='grey-bg'>${u.pts[0]||0}</span> points in total, highscore is <span class = 'grey-bg'>${u.pts[2]||0}</span> points!`)}u.date=(new Date).toDateString(),ls("mqo-user")?(u=JSON.parse(ls("mqo-user"))).ver!=ver&&(u.ver=ver,u.tasks={count:0,first_game:[0,1,0,1],plays:[0,10,10],earn_total:[0,200,100],earn_game:[0,25,50],save_lives:[0,30,0]},u.pts=[u.pts||0,u.pts2||0,0],u.lives=0,u.dataver=2,u.uid=uid(20)):s(u),u.welcome||setTimeout(()=>{showPrompt('Do you want to help us grow bigger by getting involved in the community on <a href="https://facebook.com/MathQuizOnline" target=_blank>Facebook</a> or <a href=https://facebook.com/groups/mqogame target=_blank>Group</a> or <a href="https://m.me/MathQuizOnline" target=_blank>Message Us</a> if you have questions</p><div><center><a href="https://facebook.com/MathQuizOnline/" target=_blank><img src="./assets/img/like.png" style="width: 128px" alt="Like us on Facebook"></a></center>',"center").then(e=>{showPrompt("We are doing user research that could help us with improving the game in new updates and you have a chance to get involved and help us out!<br/><b>This will include your game session<br/><a href=https://mcjoe21.com/privacy>Privacy</a>","center").then(e=>{e||(u.usage=0),u.welcome=!0,s(u)})})}),u.pts[0]>99&&u.plays>14&&($($("#target")[0][5]).text("🎯 Endless"),$("#target")[0][5].disabled=!1),(new Date).getHours()>=19&&!urlParams.has("day")&&($("body").css("background-image","url('./assets/img/night.webp')"),$("#logo").addClass("tag")),$("#start").click(function(e){e.preventDefault(),$("#a").val("");let t=fv("name");if(!t.match(/[<>()&%^$!*"' ]/gi)){let e=t.length;e<30&&e>1?fv("target")!=isNaN?(u.name=t,u.plays++,$("#a").val(""),1==u.usage&&(ls("game",`${fv("diff")}x${fv("target")}`),dataLayer.push({event:"Play Game",value:`${ls("game")}`}),$.get(`https://mcjoe21.com/collect?event=Play%20Game&value=${ls("game")}&referer=${location.host}`)),game()):(showPrompt(`You can't use that!,<br/>Keep name under<b>30</b> characters,you have ${e}`),$("#name").val("")):showPrompt("Please enter your name.<br>Name conditions:<br>Can't be a blank input<br>Most be under<b>30</b> characters<br>Can include spaces")}}),uhs();let lives,p,q,passed=[];function ti(){let e=[u.plays,u.plays,u.pts[0]||0,u.pts[1]||0,u.lives];$(".task").each(function(t){try{$(this).html($(this).html().replace("%0",u.tasks[this.id][1]).replace("%1",e[t])),passed[t]=!1,e[t]>=u.tasks[this.id][1]&&($(this).css("background-color","green"),$(this).css("border-color","darkgreen"),passed[t]=!0)}catch(e){}})}function game(){$("#quit_btn").attr("pts",0),$("#quit_btn").click(function(){eg($(this).attr("pts"),1)}),lives=3,q=1,p=0,pages(3),$("#q").html(q),ns()}function tn(e){let t=$("#a");t.css("background-color","white"),10==e?t.val(""):t.val(`${t.val()}${e}`)}ti(),$("#task_claim").click(function(){$(".task").each(function(e){passed[e]&&(t=u.tasks[this.id],t[0]!=t[3]&&(passed[e]=!1,u.tasks.count++,t[0]++,t[1]=t[2]*t[0]+1))}),s(u),$("#task_count").text(`${u.tasks.count} Points`),ti()}),$(".keyrow td").each(function(){$(this).children("button").each(()=>{$(this).click(()=>{tn(this.innerText)})})}),$("#clear_btn").click(()=>{$("#a").val("")});let st=uid(10);function gs(){let e=9*n(fv("diff")),t={vals:[ran(1,e),ran(1,e)]},a=n(fv("diff"));switch(1==a?t.type=1:a<=3?t.type=ran(1,2):a<=5&&(t.type=ran(1,3)),t.type){case 1:t.ans=t.vals[0]+t.vals[1],t.vals[2]="+";break;case 2:for(;t.vals[1]>t.vals[0];)t.vals=[ran(1,e),ran(1,e)];t.ans=t.vals[0]-t.vals[1],t.vals[2]="-";break;case 3:t.ans=t.vals[0]*t.vals[1],t.vals[2]="x"}return ss(st,btoa(JSON.stringify(t))),`${t.vals[0]} ${t.vals[2]} ${t.vals[1]} = ?`}function ns(){$("#a").val(""),$("#sum").html(gs()),$("#pts").html(`#️⃣ ${p}/${fv("target")} ❤️ ${lives}`)}$("#check").click(function(){let e=$("#a");if(""!=e.val()){let t=JSON.parse(atob(ss(st)));if(q++,$("#q").text(q),n(e.val())==t.ans){confettis(),e.val(""),p+=n(fv("diff"));let t=n(fv("target"));t!=isNaN?p>t-1&&eg(p,0):t="ANY",q>=10&&$(".question").css("font-size","45px"),e.val(""),$("#quit_btn").attr("pts",p),ns()}else 1==lives&&eg(p,2),lives-=1,e.css("background-color","red"),e.val("Wrong Answer!"),ns();ns()}});let gb=$(".about");function ap(e){8==e&&$("#feedback").attr("src",`https://docs.google.com/forms/d/e/1FAIpQLSciES5MxR2i9X2EzwMcG53H3LhrIkanSV2JczZcTt1wWpwmNQ/viewform?usp=pp_url&entry.485428648=${u.name}`),"block"!=$(gb[e]).css("display")&&($(gb).each(function(){$(this).hide()}),$(gb[e]).show())}gb.each(function(e){this.hasAttribute("ignore")||$("#index").append(`<li><span><a onclick = 'ap(${e})'>${this.title}</a></span></li>`)});