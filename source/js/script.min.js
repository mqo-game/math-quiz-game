$(function(){uhs(),pages(1),$("#v").html(ver)});let r=function(s,t){return Math.floor(Math.rdom()*t)+s},n=function(s){return Number(s)},fv=function(s){return $("#menu_form").children(`#${s}`).val()},ss=function(s,t=null){return null!=t&&(sessionStorage[s]=t),sessionStorage[s]},ls=function(s,t=null){return null!=t&&(localStorage[s]=t),localStorage[s]},msgBox=function(s,t){$("#modalTitle").html(s),$("#modalBody").html(t),$("#01").show()},u={dataver:1,name:"Player123",pts:[0,0,0],plays:0,lives:0,ver:"0.5 [BETA 1]",tasks:{count:0,first_game:[0,1,0],plays:[0,10,10],earn_total:[0,200,100],earn_game:[0,25,50],save_lives:[0,30,30]}},ver="0.5 [BETA 1]",form=$("form");function eg(s,t){uhs(),u.plays++,u.pts[0]+=n(s),u.pts[1]=u.pts[0],u.lives+=lives,ls("mqo-user",JSON.stringify(u)),pages(4),$("#a").val(""),task_info();let a=$("#endText"),e=$("#endTitle");function l(){return t?5*lives:0}a.html(`Hey <span class='grey-bg'>${u.name}</span>,<br/>It looks like you ${t?(e="You Win!","completed your challenge at"):t?(e="You Lose!","losed but you did last until"):(e="You Quit!","quit but you did last until")} question <span class='grey-bg'>${$q}</span> and got <span class='grey-bg'>${s}</span> points and got <span class='grey-bg'>${l()}</span> bonus points for lives!<br/><br/>And you have played <span class='grey-bg'>${u.plays}</span> time(s)!<br/>${u.pts[2]<s?(u.pts[2]=l()+s,`New highscore of <span class='grey-bg'>${u.pts[2]}</span> points!`):`Highscore is <span class='grey-bg'>${u.pts[2]}</span> points!`}<br/><br/>Your target score is <span class='grey-bg'>${fv("target")}</span> on <span class='grey-bg'>${["Extra Easy","Easy","Normal","Hard","Extra Hard"][n(fv("diff"))-1]}</span>\n        difficulty!`),u.pts[0]+=l()}function uhs(){$("#task_count").text(`${u.tasks.count} Points`),form.children("#name").val(u.name),$("#stats").html(`<span class='grey-bg'>${u.plays}</span> games played with <span class='grey-bg'>${u.pts[0]||0}</span> points in total, your highscore is <span class='grey-bg'>${u.pts[2]||0}</span> points!`)}u.pts[0]=n(u.pts[0]),u.date=(new Date).toDateString(),ls("mqo-user")?((u=JSON.parse(ls("mqo-user"))).date=(new Date).toDateString(),u.ver!=ver&&(u.ver=ver,u.tasks={count:0,first_game:[0,1,0],plays:[0,10,10],earn_total:[0,200,100],earn_game:[0,25,50],save_lives:[0,30,0]},u.pts=[0,0,0],u.lives=0,u.dataver=1)):ls("mqo-user",JSON.stringify(u)),u.seenPopup||(msgBox("Dear User","This is a beta test version of the game for you to try out!,<br><br>There may be bugs snd uncompleted features"),u.seenPopup=!0,ls("mqo-user",JSON.stringify(u))),u.pts[0]>49&&u.plays>9&&(form.children("#target")[0].html("🎯 Endless"),form.children("#target")[5].disabled=!1),(new Date).getHours()>=19&&($("body").css("background-image","url('images/night.jpg')"),$("#logo").addClass("header")),$("#stats").click(function(){"stats"==this.id&&msgBox("Home Stats",`${$(this).text()}<br><br><b>- That's all for now!</b>`)}),uhs(),$("#start").click(function(){$("#a").val("");let s=fv("name");if(""!=s){let t=s.length;t<30&&t>1?fv("target")!=isNaN&&(ss("_1",fv("_1")),u.name=s,u.plays+=1,$("#a").val(""),game()):(msgBox("You can't use that!",`Keep name under <b>30</b> characters, you have ${t}`),form.children("#name").val(""))}else msgBox("You can't use that!","Please enter your name. <br>Name conditions:<br>Can't be a blank input<br>Most be under <b>30</b> characters<br>Can include spaces")});let lives,passed=[],tl=$(".task");function task_info(){let s=[u.plays,u.plays,u.pts[0]||0,u.pts[1]||0,u.lives];tl.each(function(t){try{$(this).html($(this).html().replace("%0",u.tasks[this.id][1]).replace("%1",s[t])),$(this).click(function(){msgBox(`Task #${t+1}`,$(this).text())});try{passed[t]=!1,s[t]>=u.tasks[this.id][1]&&($(this).css("background-color","green"),passed[t]=!0)}catch(s){}}catch(s){}})}function task_claim(){tl.each(function(s){passed[s]&&(passed[s]=!1,u.tasks.count++,t=u.tasks[this.id],t[0]++,t[1]=t[2]*t[0]+1)}),$("#task_count").text(`${u.tasks.count} Points`)}function game(){lives=3,$q=1,$pts=0,pages(3),$("#q").html($q),ns()}function type_num(s){let t=$("#a");t.css("background-color","white"),10==s?t.val(""):t.val(`${t.val()}${s}`)}function func(){return"xxxx-4xxx-xxxx-yxxx".replace(/[xy]/g,function(s){var t=16*Math.rdom()|0;return("x"===s?t:3&t|8).toString(16)})}task_info();var st=func();function gs(){let s=9*n(fv("diff")),t={vals:[r(1,s),r(1,s)]},a=n(fv("diff"));switch(1==a?t.type=1:a<=3?t.type=r(1,2):a<=5&&(t.type=r(1,3)),t.type){case 1:t.ans=t.vals[0]+t.vals[1],t.vals[2]="+";break;case 2:for(;t.vals[1]>t.vals[0];)t.vals=[r(1,s),r(1,s)];t.ans=t.vals[0]-t.vals[1],t.vals[2]="-";break;case 3:t.ans=t.vals[0]*t.vals[1],t.vals[2]="x"}return ss(btoa(st),btoa(JSON.stringify(t))),`${t.vals[0]} ${t.vals[2]} ${t.vals[1]} = ?`}function ns(){$("#a").val(""),$("#sum").html(gs()),$("#pts").html(`#️⃣ ${$pts}/${fv("target")} ❤️ ${lives}`)}function pages(s){let t=$(".page");"block"!=$(t[s]).css("display")&&(t.each(function(){$(this).hide()}),$(t[s]).show())}$("#check").click(function(){let s=$("#a");if(""!=s.val()){let t=JSON.parse(atob(ss(btoa(st))));if(n(s.val())==t.ans){s.val(""),$q+=1,$pts+=n(fv("diff"));let t=n(fv("target"));t!=isNaN?$pts>t-1&&eg($pts,!0):t="any",$q>=10&&$(".question").css("font-size","45px"),$("#q").text($q),s.val(""),$("#quit").attr("pts",$pts),ns()}else 1==lives&&eg($pts,!1),lives-=1,s.css("background-color","red"),ns()}});let about=$(".about"),aP=function(s){8==s?$("#feedback").attr("src","feedback.html?load=1"):$("#feedback").attr("src",""),"block"!=about[s].css("display")&&($(about).each(function(){$(this).hide()}),$(about[s]).show())};about.each(function(s){$(this).attr("ignore")||$("#index").append(`<li><span><a onclick='aP(${s})'>${$(this).attr("title")}</a></span></li>`)});